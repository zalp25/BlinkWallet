# BlinkWallet — Telegram Mini App (версія з БД)

> Цей README описує **покращену версію з базою даних** у гілці `local-with-db`.
> У гілці `main` — спрощена версія без БД (статичні курси, без ROI/сесій).

---

## Що це
Демо криптогаманець у форматі Telegram Mini App.  
У цій версії:
- **реєстрація/логін** з паролем  
- **теги користувачів** для переказів  
- **сесії через cookie** (логін зберігається)  
- **дані в MySQL**  
- **оновлення курсів** бекендом + ROI за 24 години

---

## Швидкий старт (локально)

### 1) База даних (MySQL)
Потрібна локальна MySQL (Workbench або інше).

**Схема таблиць:**
- `users`
- `balances`
- `rates`
- `transfers`
- `sessions`

> Важливо:
> - `users.user_id` має бути AUTO_INCREMENT  
> - `users.tag` — UNIQUE  
> - `password_hash` — VARCHAR(255)  
> - `sessions` — обов’язково (для збереження логіну)

---

### 2) Запуск backend‑сервера (rates.go)
Це локальний HTTP‑сервер, який:
- зберігає курси у БД  
- віддає `/rates`  
- обробляє логін/реєстрацію  
- зберігає баланси  
- робить перекази

**Запуск:**
```powershell
cd MiniApp/Frontend/Currencies
$env:MYSQL_DSN="{USER}:{PASSWORD}@tcp({HOST}:{PORT})/{DB_NAME}?parseTime=true&charset=utf8mb4"
go run .\rates.go
```

Сервер слухає: `http://127.0.0.1:8080`

---

### 3) Запуск фронтенду
Відкрий `index.html` через локальний сервер (наприклад Live Server).  
Важливо використовувати **127.0.0.1**:
```
http://127.0.0.1:5500
```

---

## Функціонал

### 1) Реєстрація / Логін
- при першому вході відкривається форма
- тег користувача: **3–12 символів**, дозволені `a-z`, цифри, `_`, `-`, `.`
- пароль хешується (bcrypt)
- після логіну сесія зберігається в cookie

### 2) Home
- показує курси (USDT, BTC, ETH, SOL, TON, TRX, BLINK)
- показує ROI за 24 години

### 3) Assets
- повний список активів і балансів
- загальна вартість у $
- кнопки Deposit / Withdraw / Swap

### 4) Deposit / Withdraw / Swap
- Deposit/Swap працюють з локальними балансами, але синхронізуються в БД
- Withdraw тепер працює як **переказ іншому користувачу**
  - потрібне поле **To user (tag)**

### 5) History
- локальна історія дій (можна винести в БД у наступній версії)

### 6) Settings
- Display name  
- User tag  
- Password  
(окремі панелі)

---

## Архітектура
- **Frontend:** HTML/CSS/JS  
- **Backend:** `rates.go` (Go + MySQL)  
- **Auth:** cookie‑сесії  
- **Rates:** CoinGecko API → БД → `/rates`

---

## Обмеження
- Версія розрахована на **локальний запуск**.  
- Для хостингу потрібен сервер, який може виконувати Go + MySQL.  
- CoinGecko має ліміти API — на проді потрібні кешування або інший провайдер.

---

## Примітка про гілки
- `main` — спрощена демо‑версія без БД  
- `local-with-db` — повна версія з БД, логіном і переказами
